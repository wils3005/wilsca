{"id":"wJlv","dependencies":[{"name":"/Users/jackwilson/github.com/wils3005/wilsjs/packages/peerjs/tsconfig.json","includedInParent":true,"mtime":1614222249821},{"name":"/Users/jackwilson/github.com/wils3005/wilsjs/packages/peerjs/package.json","includedInParent":true,"mtime":1614223877867},{"name":"eventemitter3","loc":{"line":50,"column":30},"parent":"/Users/jackwilson/github.com/wils3005/wilsjs/packages/peerjs/lib/socket.ts","resolved":"/Users/jackwilson/github.com/wils3005/wilsjs/packages/peerjs/node_modules/eventemitter3/index.js"},{"name":"./logger","loc":{"line":51,"column":39},"parent":"/Users/jackwilson/github.com/wils3005/wilsjs/packages/peerjs/lib/socket.ts","resolved":"/Users/jackwilson/github.com/wils3005/wilsjs/packages/peerjs/lib/logger.ts"},{"name":"./enums","loc":{"line":52,"column":22},"parent":"/Users/jackwilson/github.com/wils3005/wilsjs/packages/peerjs/lib/socket.ts","resolved":"/Users/jackwilson/github.com/wils3005/wilsjs/packages/peerjs/lib/enums.ts"}],"generated":{"js":"\"use strict\";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),t=this&&this.__read||function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,s,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},n=this&&this.__spread||function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(t(arguments[n]));return e},o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,\"__esModule\",{value:!0});var r=require(\"eventemitter3\"),i=s(require(\"./logger\")),c=require(\"./enums\"),a=function(t){function s(e,n,o,s,r,i){void 0===i&&(i=5e3);var c=t.call(this)||this;c.pingInterval=i,c._disconnected=!0,c._messagesQueue=[];var a=e?\"wss://\":\"ws://\";return c._baseUrl=a+n+\":\"+o+s+\"peerjs?key=\"+r,c}return e(s,t),Object.defineProperty(s.prototype,\"webSocket\",{get:function(){return this._socket},enumerable:!0,configurable:!0}),s.prototype.start=function(e,t){var n=this;this._id=e;var o=this._baseUrl+\"&id=\"+e+\"&token=\"+t;!this._socket&&this._disconnected&&(this._socket=new WebSocket(o),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),i.default.log(\"Server message received:\",t)}catch(o){return void i.default.log(\"Invalid server message\",e.data)}n.emit(c.SocketEventType.Message,t)},this._socket.onclose=function(e){n._disconnected||(i.default.log(\"Socket closed.\",e),n._cleanup(),n._disconnected=!0,n.emit(c.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),i.default.log(\"Socket open\"),n._scheduleHeartbeat())})},s.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout(function(){e._sendHeartbeat()},this.pingInterval)},s.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:c.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else i.default.log(\"Cannot send heartbeat, because socket closed\")},s.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},s.prototype._sendQueuedMessages=function(){var e,t,s=n(this._messagesQueue);this._messagesQueue=[];try{for(var r=o(s),i=r.next();!i.done;i=r.next()){var c=i.value;this.send(c)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},s.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(c.SocketEventType.Error,\"Invalid message\");else this._messagesQueue.push(e)},s.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},s.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},s}(r.EventEmitter);exports.Socket=a;"},"sourceMaps":{"js":{"mappings":[{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":0}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":13}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":17}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":19}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":25}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":30}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":41}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":52}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":56}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":58}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":67}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":69}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":72}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":79}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":81}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":88}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":104}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":105}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":115}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":129}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":136}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":145}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":147}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":150}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":152}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":162}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":166}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":175}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":177}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":180}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":184}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":188}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":193}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":195}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":197}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":212}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":217}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":219}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":222}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":224}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":230}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":232}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":236}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":243}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":252}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":254}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":257}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":266}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":270}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":275}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":287}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":289}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":291}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":293}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":296}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":298}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":308}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":315}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":317}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":324}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":331}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":335}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":337}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":347}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":349}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":359}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":363}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":367}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":370}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":372}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":378}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":383}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":391}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":400}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":402}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":405}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":409}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":411}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":430}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":438}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":440}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":447}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":457}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":461}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":463}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":470}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":472}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":476}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":478}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":480}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":482}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":484}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":489}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":492}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":494}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":497}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":501}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":512}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":516}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":519}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":524}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":530}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":532}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":534}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":542}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":548}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":550}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":555}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":557}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":564}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":570}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":573}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":575}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":576}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":582}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":585}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":593}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":597}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":601}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":603}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":610}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":612}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":614}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":623}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":625}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":630}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":633}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":641}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":644}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":646}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":652}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":654}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":661}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":668}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":671}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":673}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":679}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":684}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":694}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":705}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":709}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":713}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":715}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":718}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":720}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":722}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":724}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":734}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":741}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":745}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":747}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":749}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":756}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":758}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":768}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":773}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":780}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":783}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":785}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":791}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":796}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":806}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":815}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":818}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":822}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":824}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":843}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":851}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":858}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":867}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":869}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":872}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":874}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":877}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":879}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":881}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":884}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":886}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":893}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":895}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":900}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":903}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":906}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":909}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":926}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":928}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":935}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":941}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":942}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":947}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":958}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":965}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":968}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":971}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":973}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":982}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":989}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":992}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":993}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":999}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1002}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1004}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1009}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1015}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1020}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1026}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1030}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1040}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1042}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1068}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1104}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1106}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1112}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1117}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1134}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1143}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1146}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1153}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1156}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1158}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1169}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1171}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1172}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1180}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1184}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1191}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1206}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1214}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1227}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1228}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1235}},{"source":"socket.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":1239}},{"source":"socket.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":1243}},{"source":"socket.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":1245}},{"source":"socket.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":1253}},{"source":"socket.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1270}},{"source":"socket.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1272}},{"source":"socket.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1274}},{"source":"socket.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1282}},{"source":"socket.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":1295}},{"source":"socket.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":1297}},{"source":"socket.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":1305}},{"source":"socket.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":1316}},{"source":"socket.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":1318}},{"source":"socket.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":1327}},{"source":"socket.ts","name":null,"original":{"line":17,"column":2},"generated":{"line":1,"column":1330}},{"source":"socket.ts","name":null,"original":{"line":17,"column":2},"generated":{"line":1,"column":1339}},{"source":"socket.ts","name":null,"original":{"line":18,"column":4},"generated":{"line":1,"column":1341}},{"source":"socket.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":1343}},{"source":"socket.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":1,"column":1345}},{"source":"socket.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":1,"column":1347}},{"source":"socket.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":1,"column":1349}},{"source":"socket.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":1351}},{"source":"socket.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":1359}},{"source":"socket.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":1363}},{"source":"socket.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":1367}},{"source":"socket.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":1369}},{"source":"socket.ts","name":null,"original":{"line":17,"column":2},"generated":{"line":1,"column":1374}},{"source":"socket.ts","name":null,"original":{"line":17,"column":2},"generated":{"line":1,"column":1378}},{"source":"socket.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":1380}},{"source":"socket.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":1382}},{"source":"socket.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":1387}},{"source":"socket.ts","name":null,"original":{"line":25,"column":11},"generated":{"line":1,"column":1394}},{"source":"socket.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":1399}},{"source":"socket.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":1401}},{"source":"socket.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":1414}},{"source":"socket.ts","name":null,"original":{"line":10,"column":10},"generated":{"line":1,"column":1416}},{"source":"socket.ts","name":null,"original":{"line":10,"column":10},"generated":{"line":1,"column":1418}},{"source":"socket.ts","name":null,"original":{"line":10,"column":35},"generated":{"line":1,"column":1433}},{"source":"socket.ts","name":null,"original":{"line":12,"column":10},"generated":{"line":1,"column":1435}},{"source":"socket.ts","name":null,"original":{"line":12,"column":10},"generated":{"line":1,"column":1437}},{"source":"socket.ts","name":null,"original":{"line":12,"column":42},"generated":{"line":1,"column":1452}},{"source":"socket.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":1,"column":1455}},{"source":"socket.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":1,"column":1459}},{"source":"socket.ts","name":null,"original":{"line":27,"column":23},"generated":{"line":1,"column":1461}},{"source":"socket.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":1463}},{"source":"socket.ts","name":null,"original":{"line":27,"column":43},"generated":{"line":1,"column":1472}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1480}},{"source":"socket.ts","name":null,"original":{"line":29,"column":4},"generated":{"line":1,"column":1487}},{"source":"socket.ts","name":null,"original":{"line":29,"column":9},"generated":{"line":1,"column":1489}},{"source":"socket.ts","name":null,"original":{"line":29,"column":20},"generated":{"line":1,"column":1498}},{"source":"socket.ts","name":null,"original":{"line":29,"column":33},"generated":{"line":1,"column":1500}},{"source":"socket.ts","name":null,"original":{"line":29,"column":40},"generated":{"line":1,"column":1502}},{"source":"socket.ts","name":null,"original":{"line":29,"column":46},"generated":{"line":1,"column":1506}},{"source":"socket.ts","name":null,"original":{"line":29,"column":53},"generated":{"line":1,"column":1508}},{"source":"socket.ts","name":null,"original":{"line":29,"column":60},"generated":{"line":1,"column":1510}},{"source":"socket.ts","name":null,"original":{"line":29,"column":76},"generated":{"line":1,"column":1524}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1526}},{"source":"socket.ts","name":null,"original":{"line":172,"column":0},"generated":{"line":1,"column":1528}},{"source":"socket.ts","name":null,"original":{"line":9,"column":28},"generated":{"line":1,"column":1535}},{"source":"socket.ts","name":null,"original":{"line":9,"column":28},"generated":{"line":1,"column":1537}},{"source":"socket.ts","name":null,"original":{"line":9,"column":28},"generated":{"line":1,"column":1539}},{"source":"socket.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":1,"column":1542}},{"source":"socket.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":1,"column":1549}},{"source":"socket.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":1564}},{"source":"socket.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":1566}},{"source":"socket.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":1576}},{"source":"socket.ts","name":null,"original":{"line":32,"column":15},"generated":{"line":1,"column":1588}},{"source":"socket.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":1,"column":1589}},{"source":"socket.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":1,"column":1593}},{"source":"socket.ts","name":null,"original":{"line":33,"column":11},"generated":{"line":1,"column":1604}},{"source":"socket.ts","name":null,"original":{"line":33,"column":11},"generated":{"line":1,"column":1611}},{"source":"socket.ts","name":null,"original":{"line":33,"column":16},"generated":{"line":1,"column":1616}},{"source":"socket.ts","name":null,"original":{"line":32,"column":15},"generated":{"line":1,"column":1625}},{"source":"socket.ts","name":null,"original":{"line":32,"column":15},"generated":{"line":1,"column":1637}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1639}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":1653}},{"source":"socket.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":1657}},{"source":"socket.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":1659}},{"source":"socket.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":1669}},{"source":"socket.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":1675}},{"source":"socket.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":1684}},{"source":"socket.ts","name":null,"original":{"line":36,"column":20},"generated":{"line":1,"column":1686}},{"source":"socket.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":1689}},{"source":"socket.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":1693}},{"source":"socket.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":1695}},{"source":"socket.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":1700}},{"source":"socket.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":1705}},{"source":"socket.ts","name":null,"original":{"line":37,"column":15},"generated":{"line":1,"column":1709}},{"source":"socket.ts","name":null,"original":{"line":39,"column":10},"generated":{"line":1,"column":1711}},{"source":"socket.ts","name":null,"original":{"line":39,"column":10},"generated":{"line":1,"column":1715}},{"source":"socket.ts","name":null,"original":{"line":39,"column":21},"generated":{"line":1,"column":1717}},{"source":"socket.ts","name":null,"original":{"line":39,"column":26},"generated":{"line":1,"column":1722}},{"source":"socket.ts","name":null,"original":{"line":39,"column":34},"generated":{"line":1,"column":1731}},{"source":"socket.ts","name":null,"original":{"line":39,"column":41},"generated":{"line":1,"column":1738}},{"source":"socket.ts","name":null,"original":{"line":39,"column":43},"generated":{"line":1,"column":1740}},{"source":"socket.ts","name":null,"original":{"line":39,"column":53},"generated":{"line":1,"column":1750}},{"source":"socket.ts","name":null,"original":{"line":41,"column":10},"generated":{"line":1,"column":1753}},{"source":"socket.ts","name":null,"original":{"line":41,"column":15},"generated":{"line":1,"column":1758}},{"source":"socket.ts","name":null,"original":{"line":41,"column":27},"generated":{"line":1,"column":1767}},{"source":"socket.ts","name":null,"original":{"line":41,"column":32},"generated":{"line":1,"column":1772}},{"source":"socket.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":1,"column":1788}},{"source":"socket.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":1,"column":1793}},{"source":"socket.ts","name":null,"original":{"line":45,"column":19},"generated":{"line":1,"column":1801}},{"source":"socket.ts","name":null,"original":{"line":45,"column":23},"generated":{"line":1,"column":1805}},{"source":"socket.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":1,"column":1815}},{"source":"socket.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":1,"column":1818}},{"source":"socket.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":1,"column":1823}},{"source":"socket.ts","name":null,"original":{"line":46,"column":25},"generated":{"line":1,"column":1838}},{"source":"socket.ts","name":null,"original":{"line":48,"column":9},"generated":{"line":1,"column":1840}},{"source":"socket.ts","name":null,"original":{"line":48,"column":9},"generated":{"line":1,"column":1845}},{"source":"socket.ts","name":null,"original":{"line":48,"column":17},"generated":{"line":1,"column":1853}},{"source":"socket.ts","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":1863}},{"source":"socket.ts","name":null,"original":{"line":48,"column":30},"generated":{"line":1,"column":1872}},{"source":"socket.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":1875}},{"source":"socket.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":1879}},{"source":"socket.ts","name":null,"original":{"line":51,"column":10},"generated":{"line":1,"column":1881}},{"source":"socket.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":1885}},{"source":"socket.ts","name":null,"original":{"line":52,"column":15},"generated":{"line":1,"column":1887}},{"source":"socket.ts","name":null,"original":{"line":52,"column":20},"generated":{"line":1,"column":1892}},{"source":"socket.ts","name":null,"original":{"line":52,"column":26},"generated":{"line":1,"column":1898}},{"source":"socket.ts","name":null,"original":{"line":52,"column":32},"generated":{"line":1,"column":1900}},{"source":"socket.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":1906}},{"source":"socket.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":1908}},{"source":"socket.ts","name":null,"original":{"line":53,"column":15},"generated":{"line":1,"column":1916}},{"source":"socket.ts","name":null,"original":{"line":53,"column":19},"generated":{"line":1,"column":1920}},{"source":"socket.ts","name":null,"original":{"line":53,"column":47},"generated":{"line":1,"column":1947}},{"source":"socket.ts","name":null,"original":{"line":54,"column":8},"generated":{"line":1,"column":1950}},{"source":"socket.ts","name":null,"original":{"line":54,"column":15},"generated":{"line":1,"column":1956}},{"source":"socket.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":1959}},{"source":"socket.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":1971}},{"source":"socket.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":1973}},{"source":"socket.ts","name":null,"original":{"line":55,"column":15},"generated":{"line":1,"column":1981}},{"source":"socket.ts","name":null,"original":{"line":55,"column":19},"generated":{"line":1,"column":1985}},{"source":"socket.ts","name":null,"original":{"line":55,"column":45},"generated":{"line":1,"column":2010}},{"source":"socket.ts","name":null,"original":{"line":55,"column":51},"generated":{"line":1,"column":2012}},{"source":"socket.ts","name":null,"original":{"line":59,"column":6},"generated":{"line":1,"column":2018}},{"source":"socket.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":2020}},{"source":"socket.ts","name":null,"original":{"line":59,"column":16},"generated":{"line":1,"column":2025}},{"source":"socket.ts","name":null,"original":{"line":59,"column":16},"generated":{"line":1,"column":2027}},{"source":"socket.ts","name":null,"original":{"line":59,"column":32},"generated":{"line":1,"column":2043}},{"source":"socket.ts","name":null,"original":{"line":59,"column":41},"generated":{"line":1,"column":2051}},{"source":"socket.ts","name":null,"original":{"line":62,"column":9},"generated":{"line":1,"column":2055}},{"source":"socket.ts","name":null,"original":{"line":62,"column":9},"generated":{"line":1,"column":2060}},{"source":"socket.ts","name":null,"original":{"line":62,"column":17},"generated":{"line":1,"column":2068}},{"source":"socket.ts","name":null,"original":{"line":62,"column":27},"generated":{"line":1,"column":2076}},{"source":"socket.ts","name":null,"original":{"line":62,"column":28},"generated":{"line":1,"column":2085}},{"source":"socket.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":2088}},{"source":"socket.ts","name":null,"original":{"line":63,"column":15},"generated":{"line":1,"column":2090}},{"source":"socket.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":2106}},{"source":"socket.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":2108}},{"source":"socket.ts","name":null,"original":{"line":67,"column":13},"generated":{"line":1,"column":2116}},{"source":"socket.ts","name":null,"original":{"line":67,"column":17},"generated":{"line":1,"column":2120}},{"source":"socket.ts","name":null,"original":{"line":67,"column":35},"generated":{"line":1,"column":2137}},{"source":"socket.ts","name":null,"original":{"line":69,"column":6},"generated":{"line":1,"column":2140}},{"source":"socket.ts","name":null,"original":{"line":69,"column":11},"generated":{"line":1,"column":2142}},{"source":"socket.ts","name":null,"original":{"line":70,"column":6},"generated":{"line":1,"column":2153}},{"source":"socket.ts","name":null,"original":{"line":70,"column":11},"generated":{"line":1,"column":2155}},{"source":"socket.ts","name":null,"original":{"line":70,"column":27},"generated":{"line":1,"column":2170}},{"source":"socket.ts","name":null,"original":{"line":72,"column":6},"generated":{"line":1,"column":2172}},{"source":"socket.ts","name":null,"original":{"line":72,"column":11},"generated":{"line":1,"column":2174}},{"source":"socket.ts","name":null,"original":{"line":72,"column":16},"generated":{"line":1,"column":2179}},{"source":"socket.ts","name":null,"original":{"line":72,"column":16},"generated":{"line":1,"column":2181}},{"source":"socket.ts","name":null,"original":{"line":72,"column":32},"generated":{"line":1,"column":2197}},{"source":"socket.ts","name":null,"original":{"line":77,"column":9},"generated":{"line":1,"column":2213}},{"source":"socket.ts","name":null,"original":{"line":77,"column":9},"generated":{"line":1,"column":2218}},{"source":"socket.ts","name":null,"original":{"line":77,"column":17},"generated":{"line":1,"column":2226}},{"source":"socket.ts","name":null,"original":{"line":77,"column":26},"generated":{"line":1,"column":2233}},{"source":"socket.ts","name":null,"original":{"line":78,"column":10},"generated":{"line":1,"column":2244}},{"source":"socket.ts","name":null,"original":{"line":78,"column":15},"generated":{"line":1,"column":2246}},{"source":"socket.ts","name":null,"original":{"line":82,"column":6},"generated":{"line":1,"column":2262}},{"source":"socket.ts","name":null,"original":{"line":82,"column":11},"generated":{"line":1,"column":2264}},{"source":"socket.ts","name":null,"original":{"line":84,"column":6},"generated":{"line":1,"column":2286}},{"source":"socket.ts","name":null,"original":{"line":84,"column":6},"generated":{"line":1,"column":2288}},{"source":"socket.ts","name":null,"original":{"line":84,"column":13},"generated":{"line":1,"column":2296}},{"source":"socket.ts","name":null,"original":{"line":84,"column":17},"generated":{"line":1,"column":2300}},{"source":"socket.ts","name":null,"original":{"line":86,"column":6},"generated":{"line":1,"column":2315}},{"source":"socket.ts","name":null,"original":{"line":86,"column":11},"generated":{"line":1,"column":2317}},{"source":"socket.ts","name":null,"original":{"line":90,"column":10},"generated":{"line":1,"column":2342}},{"source":"socket.ts","name":null,"original":{"line":90,"column":10},"generated":{"line":1,"column":2344}},{"source":"socket.ts","name":null,"original":{"line":90,"column":10},"generated":{"line":1,"column":2354}},{"source":"socket.ts","name":null,"original":{"line":90,"column":2},"generated":{"line":1,"column":2373}},{"source":"socket.ts","name":null,"original":{"line":90,"column":2},"generated":{"line":1,"column":2384}},{"source":"socket.ts","name":null,"original":{"line":90,"column":2},"generated":{"line":1,"column":2388}},{"source":"socket.ts","name":null,"original":{"line":90,"column":2},"generated":{"line":1,"column":2390}},{"source":"socket.ts","name":null,"original":{"line":91,"column":9},"generated":{"line":1,"column":2395}},{"source":"socket.ts","name":null,"original":{"line":91,"column":9},"generated":{"line":1,"column":2400}},{"source":"socket.ts","name":null,"original":{"line":91,"column":24},"generated":{"line":1,"column":2413}},{"source":"socket.ts","name":null,"original":{"line":91,"column":35},"generated":{"line":1,"column":2424}},{"source":"socket.ts","name":null,"original":{"line":92,"column":6},"generated":{"line":1,"column":2435}},{"source":"socket.ts","name":null,"original":{"line":92,"column":11},"generated":{"line":1,"column":2437}},{"source":"socket.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":2455}},{"source":"socket.ts","name":null,"original":{"line":93,"column":12},"generated":{"line":1,"column":2460}},{"source":"socket.ts","name":null,"original":{"line":96,"column":10},"generated":{"line":1,"column":2475}},{"source":"socket.ts","name":null,"original":{"line":96,"column":10},"generated":{"line":1,"column":2477}},{"source":"socket.ts","name":null,"original":{"line":96,"column":10},"generated":{"line":1,"column":2487}},{"source":"socket.ts","name":null,"original":{"line":96,"column":2},"generated":{"line":1,"column":2502}},{"source":"socket.ts","name":null,"original":{"line":97,"column":8},"generated":{"line":1,"column":2513}},{"source":"socket.ts","name":null,"original":{"line":97,"column":9},"generated":{"line":1,"column":2516}},{"source":"socket.ts","name":null,"original":{"line":97,"column":14},"generated":{"line":1,"column":2521}},{"source":"socket.ts","name":null,"original":{"line":97,"column":8},"generated":{"line":1,"column":2531}},{"source":"socket.ts","name":null,"original":{"line":102,"column":10},"generated":{"line":1,"column":2532}},{"source":"socket.ts","name":null,"original":{"line":102,"column":10},"generated":{"line":1,"column":2536}},{"source":"socket.ts","name":null,"original":{"line":102,"column":20},"generated":{"line":1,"column":2538}},{"source":"socket.ts","name":null,"original":{"line":102,"column":25},"generated":{"line":1,"column":2543}},{"source":"socket.ts","name":null,"original":{"line":102,"column":35},"generated":{"line":1,"column":2553}},{"source":"socket.ts","name":null,"original":{"line":102,"column":37},"generated":{"line":1,"column":2554}},{"source":"socket.ts","name":null,"original":{"line":102,"column":43},"generated":{"line":1,"column":2559}},{"source":"socket.ts","name":null,"original":{"line":102,"column":43},"generated":{"line":1,"column":2561}},{"source":"socket.ts","name":null,"original":{"line":102,"column":61},"generated":{"line":1,"column":2579}},{"source":"socket.ts","name":null,"original":{"line":104,"column":9},"generated":{"line":1,"column":2591}},{"source":"socket.ts","name":null,"original":{"line":104,"column":9},"generated":{"line":1,"column":2596}},{"source":"socket.ts","name":null,"original":{"line":104,"column":18},"generated":{"line":1,"column":2604}},{"source":"socket.ts","name":null,"original":{"line":104,"column":23},"generated":{"line":1,"column":2609}},{"source":"socket.ts","name":null,"original":{"line":106,"column":9},"generated":{"line":1,"column":2612}},{"source":"socket.ts","name":null,"original":{"line":106,"column":9},"generated":{"line":1,"column":2617}},{"source":"socket.ts","name":null,"original":{"line":98,"column":6},"generated":{"line":1,"column":2643}},{"source":"socket.ts","name":null,"original":{"line":98,"column":6},"generated":{"line":1,"column":2645}},{"source":"socket.ts","name":null,"original":{"line":98,"column":13},"generated":{"line":1,"column":2653}},{"source":"socket.ts","name":null,"original":{"line":98,"column":17},"generated":{"line":1,"column":2657}},{"source":"socket.ts","name":null,"original":{"line":110,"column":10},"generated":{"line":1,"column":2706}},{"source":"socket.ts","name":null,"original":{"line":110,"column":10},"generated":{"line":1,"column":2708}},{"source":"socket.ts","name":null,"original":{"line":110,"column":10},"generated":{"line":1,"column":2718}},{"source":"socket.ts","name":null,"original":{"line":110,"column":2},"generated":{"line":1,"column":2726}},{"source":"socket.ts","name":null,"original":{"line":111,"column":11},"generated":{"line":1,"column":2737}},{"source":"socket.ts","name":null,"original":{"line":111,"column":13},"generated":{"line":1,"column":2745}},{"source":"socket.ts","name":null,"original":{"line":111,"column":18},"generated":{"line":1,"column":2750}},{"source":"socket.ts","name":null,"original":{"line":111,"column":57},"generated":{"line":1,"column":2759}},{"source":"socket.ts","name":null,"original":{"line":111,"column":29},"generated":{"line":1,"column":2763}},{"source":"socket.ts","name":null,"original":{"line":111,"column":34},"generated":{"line":1,"column":2768}},{"source":"socket.ts","name":null,"original":{"line":111,"column":42},"generated":{"line":1,"column":2776}},{"source":"socket.ts","name":null,"original":{"line":115,"column":10},"generated":{"line":1,"column":2788}},{"source":"socket.ts","name":null,"original":{"line":115,"column":10},"generated":{"line":1,"column":2790}},{"source":"socket.ts","name":null,"original":{"line":115,"column":10},"generated":{"line":1,"column":2800}},{"source":"socket.ts","name":null,"original":{"line":115,"column":2},"generated":{"line":1,"column":2820}},{"source":"socket.ts","name":null,"original":{"line":115,"column":2},"generated":{"line":1,"column":2831}},{"source":"socket.ts","name":null,"original":{"line":115,"column":2},"generated":{"line":1,"column":2835}},{"source":"socket.ts","name":null,"original":{"line":115,"column":2},"generated":{"line":1,"column":2837}},{"source":"socket.ts","name":null,"original":{"line":118,"column":10},"generated":{"line":1,"column":2839}},{"source":"socket.ts","name":null,"original":{"line":118,"column":21},"generated":{"line":1,"column":2841}},{"source":"socket.ts","name":null,"original":{"line":118,"column":28},"generated":{"line":1,"column":2843}},{"source":"socket.ts","name":null,"original":{"line":118,"column":33},"generated":{"line":1,"column":2848}},{"source":"socket.ts","name":null,"original":{"line":119,"column":9},"generated":{"line":1,"column":2864}},{"source":"socket.ts","name":null,"original":{"line":119,"column":9},"generated":{"line":1,"column":2869}},{"source":"socket.ts","name":null,"original":{"line":119,"column":26},"generated":{"line":1,"column":2884}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2887}},{"source":"socket.ts","name":null,"original":{"line":121,"column":26},"generated":{"line":1,"column":2891}},{"source":"socket.ts","name":null,"original":{"line":121,"column":26},"generated":{"line":1,"column":2895}},{"source":"socket.ts","name":null,"original":{"line":121,"column":26},"generated":{"line":1,"column":2899}},{"source":"socket.ts","name":null,"original":{"line":121,"column":26},"generated":{"line":1,"column":2901}},{"source":"socket.ts","name":null,"original":{"line":121,"column":26},"generated":{"line":1,"column":2903}},{"source":"socket.ts","name":null,"original":{"line":121,"column":37},"generated":{"line":1,"column":2906}},{"source":"socket.ts","name":null,"original":{"line":121,"column":37},"generated":{"line":1,"column":2908}},{"source":"socket.ts","name":null,"original":{"line":121,"column":37},"generated":{"line":1,"column":2910}},{"source":"socket.ts","name":null,"original":{"line":121,"column":37},"generated":{"line":1,"column":2918}},{"source":"socket.ts","name":null,"original":{"line":121,"column":37},"generated":{"line":1,"column":2920}},{"source":"socket.ts","name":null,"original":{"line":121,"column":37},"generated":{"line":1,"column":2925}},{"source":"socket.ts","name":null,"original":{"line":121,"column":37},"generated":{"line":1,"column":2927}},{"source":"socket.ts","name":null,"original":{"line":121,"column":37},"generated":{"line":1,"column":2929}},{"source":"socket.ts","name":null,"original":{"line":121,"column":39},"generated":{"line":1,"column":2936}},{"source":"socket.ts","name":null,"original":{"line":121,"column":15},"generated":{"line":1,"column":2937}},{"source":"socket.ts","name":null,"original":{"line":121,"column":15},"generated":{"line":1,"column":2941}},{"source":"socket.ts","name":null,"original":{"line":121,"column":22},"generated":{"line":1,"column":2943}},{"source":"socket.ts","name":null,"original":{"line":121,"column":22},"generated":{"line":1,"column":2945}},{"source":"socket.ts","name":null,"original":{"line":122,"column":11},"generated":{"line":1,"column":2951}},{"source":"socket.ts","name":null,"original":{"line":122,"column":11},"generated":{"line":1,"column":2956}},{"source":"socket.ts","name":null,"original":{"line":122,"column":16},"generated":{"line":1,"column":2961}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2965}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2971}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2974}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2976}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2977}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2983}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2986}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2994}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":2998}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3002}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3004}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3011}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3013}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3015}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3024}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3026}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3031}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3034}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3042}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3045}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3047}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3053}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3055}},{"source":"socket.ts","name":null,"original":{"line":127,"column":2},"generated":{"line":1,"column":3064}},{"source":"socket.ts","name":null,"original":{"line":127,"column":2},"generated":{"line":1,"column":3066}},{"source":"socket.ts","name":null,"original":{"line":127,"column":2},"generated":{"line":1,"column":3076}},{"source":"socket.ts","name":null,"original":{"line":127,"column":2},"generated":{"line":1,"column":3081}},{"source":"socket.ts","name":null,"original":{"line":127,"column":7},"generated":{"line":1,"column":3090}},{"source":"socket.ts","name":null,"original":{"line":128,"column":8},"generated":{"line":1,"column":3093}},{"source":"socket.ts","name":null,"original":{"line":128,"column":8},"generated":{"line":1,"column":3097}},{"source":"socket.ts","name":null,"original":{"line":128,"column":13},"generated":{"line":1,"column":3102}},{"source":"socket.ts","name":null,"original":{"line":134,"column":8},"generated":{"line":1,"column":3116}},{"source":"socket.ts","name":null,"original":{"line":134,"column":9},"generated":{"line":1,"column":3119}},{"source":"socket.ts","name":null,"original":{"line":134,"column":14},"generated":{"line":1,"column":3124}},{"source":"socket.ts","name":null,"original":{"line":139,"column":8},"generated":{"line":1,"column":3128}},{"source":"socket.ts","name":null,"original":{"line":139,"column":9},"generated":{"line":1,"column":3131}},{"source":"socket.ts","name":null,"original":{"line":139,"column":14},"generated":{"line":1,"column":3133}},{"source":"socket.ts","name":null,"original":{"line":144,"column":8},"generated":{"line":1,"column":3139}},{"source":"socket.ts","name":null,"original":{"line":144,"column":9},"generated":{"line":1,"column":3142}},{"source":"socket.ts","name":null,"original":{"line":144,"column":14},"generated":{"line":1,"column":3147}},{"source":"socket.ts","name":null,"original":{"line":144,"column":8},"generated":{"line":1,"column":3157}},{"source":"socket.ts","name":null,"original":{"line":148,"column":10},"generated":{"line":1,"column":3158}},{"source":"socket.ts","name":null,"original":{"line":148,"column":10},"generated":{"line":1,"column":3162}},{"source":"socket.ts","name":null,"original":{"line":148,"column":20},"generated":{"line":1,"column":3164}},{"source":"socket.ts","name":null,"original":{"line":148,"column":25},"generated":{"line":1,"column":3169}},{"source":"socket.ts","name":null,"original":{"line":148,"column":35},"generated":{"line":1,"column":3179}},{"source":"socket.ts","name":null,"original":{"line":150,"column":9},"generated":{"line":1,"column":3182}},{"source":"socket.ts","name":null,"original":{"line":150,"column":9},"generated":{"line":1,"column":3187}},{"source":"socket.ts","name":null,"original":{"line":150,"column":18},"generated":{"line":1,"column":3195}},{"source":"socket.ts","name":null,"original":{"line":150,"column":23},"generated":{"line":1,"column":3200}},{"source":"socket.ts","name":null,"original":{"line":140,"column":11},"generated":{"line":1,"column":3209}},{"source":"socket.ts","name":null,"original":{"line":140,"column":11},"generated":{"line":1,"column":3214}},{"source":"socket.ts","name":null,"original":{"line":140,"column":16},"generated":{"line":1,"column":3219}},{"source":"socket.ts","name":null,"original":{"line":140,"column":16},"generated":{"line":1,"column":3221}},{"source":"socket.ts","name":null,"original":{"line":140,"column":32},"generated":{"line":1,"column":3237}},{"source":"socket.ts","name":null,"original":{"line":140,"column":39},"generated":{"line":1,"column":3243}},{"source":"socket.ts","name":null,"original":{"line":135,"column":11},"generated":{"line":1,"column":3267}},{"source":"socket.ts","name":null,"original":{"line":135,"column":11},"generated":{"line":1,"column":3272}},{"source":"socket.ts","name":null,"original":{"line":135,"column":26},"generated":{"line":1,"column":3287}},{"source":"socket.ts","name":null,"original":{"line":135,"column":31},"generated":{"line":1,"column":3292}},{"source":"socket.ts","name":null,"original":{"line":153,"column":2},"generated":{"line":1,"column":3296}},{"source":"socket.ts","name":null,"original":{"line":153,"column":2},"generated":{"line":1,"column":3298}},{"source":"socket.ts","name":null,"original":{"line":153,"column":2},"generated":{"line":1,"column":3308}},{"source":"socket.ts","name":null,"original":{"line":153,"column":2},"generated":{"line":1,"column":3314}},{"source":"socket.ts","name":null,"original":{"line":154,"column":8},"generated":{"line":1,"column":3325}},{"source":"socket.ts","name":null,"original":{"line":154,"column":13},"generated":{"line":1,"column":3330}},{"source":"socket.ts","name":null,"original":{"line":158,"column":9},"generated":{"line":1,"column":3346}},{"source":"socket.ts","name":null,"original":{"line":158,"column":9},"generated":{"line":1,"column":3351}},{"source":"socket.ts","name":null,"original":{"line":160,"column":9},"generated":{"line":1,"column":3362}},{"source":"socket.ts","name":null,"original":{"line":160,"column":9},"generated":{"line":1,"column":3367}},{"source":"socket.ts","name":null,"original":{"line":160,"column":25},"generated":{"line":1,"column":3382}},{"source":"socket.ts","name":null,"original":{"line":163,"column":10},"generated":{"line":1,"column":3386}},{"source":"socket.ts","name":null,"original":{"line":163,"column":10},"generated":{"line":1,"column":3388}},{"source":"socket.ts","name":null,"original":{"line":163,"column":10},"generated":{"line":1,"column":3398}},{"source":"socket.ts","name":null,"original":{"line":163,"column":2},"generated":{"line":1,"column":3407}},{"source":"socket.ts","name":null,"original":{"line":164,"column":10},"generated":{"line":1,"column":3418}},{"source":"socket.ts","name":null,"original":{"line":164,"column":15},"generated":{"line":1,"column":3423}},{"source":"socket.ts","name":null,"original":{"line":165,"column":11},"generated":{"line":1,"column":3433}},{"source":"socket.ts","name":null,"original":{"line":165,"column":11},"generated":{"line":1,"column":3438}},{"source":"socket.ts","name":null,"original":{"line":165,"column":19},"generated":{"line":1,"column":3446}},{"source":"socket.ts","name":null,"original":{"line":165,"column":28},"generated":{"line":1,"column":3453}},{"source":"socket.ts","name":null,"original":{"line":165,"column":33},"generated":{"line":1,"column":3458}},{"source":"socket.ts","name":null,"original":{"line":165,"column":41},"generated":{"line":1,"column":3466}},{"source":"socket.ts","name":null,"original":{"line":165,"column":53},"generated":{"line":1,"column":3476}},{"source":"socket.ts","name":null,"original":{"line":165,"column":58},"generated":{"line":1,"column":3481}},{"source":"socket.ts","name":null,"original":{"line":165,"column":66},"generated":{"line":1,"column":3489}},{"source":"socket.ts","name":null,"original":{"line":165,"column":76},"generated":{"line":1,"column":3497}},{"source":"socket.ts","name":null,"original":{"line":166,"column":11},"generated":{"line":1,"column":3502}},{"source":"socket.ts","name":null,"original":{"line":166,"column":11},"generated":{"line":1,"column":3507}},{"source":"socket.ts","name":null,"original":{"line":166,"column":19},"generated":{"line":1,"column":3515}},{"source":"socket.ts","name":null,"original":{"line":167,"column":11},"generated":{"line":1,"column":3523}},{"source":"socket.ts","name":null,"original":{"line":167,"column":11},"generated":{"line":1,"column":3528}},{"source":"socket.ts","name":null,"original":{"line":167,"column":21},"generated":{"line":1,"column":3541}},{"source":"socket.ts","name":null,"original":{"line":170,"column":4},"generated":{"line":1,"column":3544}},{"source":"socket.ts","name":null,"original":{"line":170,"column":17},"generated":{"line":1,"column":3557}},{"source":"socket.ts","name":null,"original":{"line":170,"column":22},"generated":{"line":1,"column":3562}},{"source":"socket.ts","name":null,"original":{"line":172,"column":0},"generated":{"line":1,"column":3577}},{"source":"socket.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":3579}},{"source":"socket.ts","name":null,"original":{"line":9,"column":28},"generated":{"line":1,"column":3580}},{"source":"socket.ts","name":null,"original":{"line":9,"column":28},"generated":{"line":1,"column":3582}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3596}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3604}},{"source":"socket.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":3611}}],"sources":{"socket.ts":"import { EventEmitter } from \"eventemitter3\";\nimport logger from \"./logger\";\nimport { SocketEventType, ServerMessageType } from \"./enums\";\n\n/**\n * An abstraction on top of WebSockets to provide fastest\n * possible connection for peers.\n */\nexport class Socket extends EventEmitter {\n  private _disconnected: boolean = true;\n  private _id?: string;\n  private _messagesQueue: Array<object> = [];\n  private _socket?: WebSocket;\n  private _wsPingTimer?: any;\n  private readonly _baseUrl: string;\n\n  constructor(\n    secure: any,\n    host: string,\n    port: number,\n    path: string,\n    key: string,\n    private readonly pingInterval: number = 5000\n  ) {\n    super();\n\n    const wsProtocol = secure ? \"wss://\" : \"ws://\";\n\n    this._baseUrl = wsProtocol + host + \":\" + port + path + \"peerjs?key=\" + key;\n  }\n\n  get webSocket(): WebSocket | undefined {\n    return this._socket;\n  }\n\n  start(id: string, token: string): void {\n    this._id = id;\n\n    const wsUrl = `${this._baseUrl}&id=${id}&token=${token}`;\n\n    if (!!this._socket || !this._disconnected) {\n      return;\n    }\n\n    this._socket = new WebSocket(wsUrl);\n    this._disconnected = false;\n\n    this._socket.onmessage = (event) => {\n      let data;\n\n      try {\n        data = JSON.parse(event.data);\n        logger.log(\"Server message received:\", data);\n      } catch (e) {\n        logger.log(\"Invalid server message\", event.data);\n        return;\n      }\n\n      this.emit(SocketEventType.Message, data);\n    };\n\n    this._socket.onclose = (event) => {\n      if (this._disconnected) {\n        return;\n      }\n\n      logger.log(\"Socket closed.\", event);\n\n      this._cleanup();\n      this._disconnected = true;\n\n      this.emit(SocketEventType.Disconnected);\n    };\n\n    // Take care of the queue of connections if necessary and make sure Peer knows\n    // socket is open.\n    this._socket.onopen = () => {\n      if (this._disconnected) {\n        return;\n      }\n\n      this._sendQueuedMessages();\n\n      logger.log(\"Socket open\");\n\n      this._scheduleHeartbeat();\n    };\n  }\n\n  private _scheduleHeartbeat(): void {\n    this._wsPingTimer = setTimeout(() => {\n      this._sendHeartbeat();\n    }, this.pingInterval);\n  }\n\n  private _sendHeartbeat(): void {\n    if (!this._wsOpen()) {\n      logger.log(`Cannot send heartbeat, because socket closed`);\n      return;\n    }\n\n    const message = JSON.stringify({ type: ServerMessageType.Heartbeat });\n\n    this._socket!.send(message);\n\n    this._scheduleHeartbeat();\n  }\n\n  /** Is the websocket currently open? */\n  private _wsOpen(): boolean {\n    return !!this._socket && this._socket.readyState === 1;\n  }\n\n  /** Send queued messages. */\n  private _sendQueuedMessages(): void {\n    //Create copy of queue and clear it,\n    //because send method push the message back to queue if smth will go wrong\n    const copiedQueue = [...this._messagesQueue];\n    this._messagesQueue = [];\n\n    for (const message of copiedQueue) {\n      this.send(message);\n    }\n  }\n\n  /** Exposed send for DC & Peer. */\n  send(data: any): void {\n    if (this._disconnected) {\n      return;\n    }\n\n    // If we didn't get an ID yet, we can't yet send anything so we should queue\n    // up these messages.\n    if (!this._id) {\n      this._messagesQueue.push(data);\n      return;\n    }\n\n    if (!data.type) {\n      this.emit(SocketEventType.Error, \"Invalid message\");\n      return;\n    }\n\n    if (!this._wsOpen()) {\n      return;\n    }\n\n    const message = JSON.stringify(data);\n\n    this._socket!.send(message);\n  }\n\n  close(): void {\n    if (this._disconnected) {\n      return;\n    }\n\n    this._cleanup();\n\n    this._disconnected = true;\n  }\n\n  private _cleanup(): void {\n    if (!!this._socket) {\n      this._socket.onopen = this._socket.onmessage = this._socket.onclose = null;\n      this._socket.close();\n      this._socket = undefined;\n    }\n\n    clearTimeout(this._wsPingTimer!);\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"16289ec03a2d74cbeddb5b8d32b98447","cacheData":{"env":{}}}